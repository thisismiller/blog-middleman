<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Use the title from a page's frontmatter if it has one -->
    <title><%= current_page.data.title || "Middleman" %></title>
    <%= stylesheet_link_tag (current_page.data.style || "post") %>
    <%= stylesheet_link_tag "coderay" %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/g2plot/2.4.19/g2plot.min.js" integrity="sha512-OpJr+ltzajlHXM+/bLHL6CL6kCzAnh0b7yCHnWb1nF1bofEWBnwAA3VtnVXEqROr4Tmet7pSfoEVtK9w88L6Hg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/dataframe-js@1.4.4/dist/dataframe.min.js" referrerpolicy="no-referrer"></script>
    <%= javascript_include_tag "site" %>
  </head>
  <body>
    <div class="header">
    </div>
    <h1><%= if current_page.data.no_title then "" else current_page.data.title end %></h1>
    <%= yield %>
    <hr />
    <!-- TODO: consider https://utteranc.es/ for in-page comments. -->
    <% if !current_page.data.nofooter %>
      <% category_heading = if current_page.data.category then current_page.data.category + ": " else "" end .titleize %>
      <p><a href="https://discu.eu/?q=<%= "https://transactional.blog" + current_page.url %>&submit_title=<%= category_heading + current_page.data.title %>">See discussion of this page on Reddit, HN, lobsters</a>.</p>
    <% end %>
    <% if environment == :transactionalblog %>
    <script data-goatcounter="https://transactionalblog.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
    <% end %>
  </body>
</html>
